<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<h1 style="text-align:center; color:white;">Dashboard</h1>

<div class="box">
    <h2 id="welcome"></h2>
    <p>Balance: <span id="balance"></span> ðŸ’°</p>

    <input id="addAmount" type="number" placeholder="Amount to Add">
    <a class="btn" onclick="addBalance()">Add Balance</a>

    <a class="btn" style="background:red;" onclick="logout()">Logout</a>
</div>

<script src="script.js"></script>

<script>
async function load() {
    let user = localStorage.getItem("logged");
    if (!user) {
        window.location.href = "login.html";
        return;
    }

    let users = await getUsers();
    let data = users[user];

    document.getElementById("welcome").innerText = "Welcome, " + user;
    document.getElementById("balance").innerText = data.balance;
}

async function addBalance() {
    let amount = Number(document.getElementById("addAmount").value);
    let user = localStorage.getItem("logged");
    let users = await getUsers();

    users[user].balance += amount;

    await saveUsers(users);
    load();
}

function logout() {
    localStorage.removeItem("logged");
    window.location.href = "login.html";
}

load();
</script>

</body>
</html>
